<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Quant Engine Live Signals</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: #e0e0e0; padding: 20px; }
        #signals-container { max-height: 500px; overflow-y: auto; border: 1px solid #333; border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #333; }
        th { background: #1f1f1f; position: sticky; top: 0; }
        .buy { color: #00ff88; font-weight: bold; }
        .sell { color: #ff4444; font-weight: bold; }
        .signal-row { animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; background: #2a2a2a; } to { opacity: 1; } }
    </style>
</head>
<body>
    <h1>游니 Se침ales en Tiempo Real</h1>
    <div id="status">Estado: <span id="ws-status" style="color: gray;">Conectando...</span></div>
    <br>
    <div id="signals-container">
        <table id="signals-table">
            <thead>
                <tr>
                    <th>Timestamp</th>
                    <th>Compra (Buy)</th>
                    <th>Venta (Sell)</th>
                    <th>Spread %</th>
                </tr>
            </thead>
            <tbody id="signals-body">
                </tbody>
        </table>
    </div>

    <script>
        const statusSpan = document.getElementById('ws-status');
        const signalsBody = document.getElementById('signals-body');
        
        // Conexi칩n al servidor Python de WebSockets
        const socket = new WebSocket('ws://localhost:8000/ws');

        socket.onopen = () => {
            statusSpan.innerText = "Conectado";
            statusSpan.style.color = "#00ff88";
        };

        socket.onmessage = (event) => {
            const data = JSON.parse(event.data);
            
            // Crear nueva fila
            const row = document.createElement('tr');
            row.className = 'signal-row';
            
            const time = new Date().toLocaleTimeString();
            
            row.innerHTML = `
                <td>${time}</td>
                <td class="buy">${data.buy}</td>
                <td class="sell">${data.sell}</td>
                <td><strong>${data.spread}%</strong></td>
            `;

            // Insertar al inicio para ver lo m치s reciente arriba
            signalsBody.insertBefore(row, signalsBody.firstChild);
        };

        socket.onclose = () => {
            statusSpan.innerText = "Desconectado";
            statusSpan.style.color = "#ff4444";
        };
    </script>
</body>
</html>